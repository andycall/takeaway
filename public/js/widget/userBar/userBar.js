define(["jquery","underscore"],function(a,b){var c=a(".tb-search-form"),d=a(".tb-search-input"),e=a(".icon-loading"),f=a(".icon-clear"),g=a(".search-result");return d.on("focus",function(){c.css({background:"#FFF"})}).on("keydown",function(){a.ajax("/takeaway/public/index.php/userBarSearch",{beforeSend:function(){f.addClass("hide"),e.removeClass("hide")},success:function(c){if("true"==c.success){var d=c.data,h=b.template(a("#tpl-tb-search").html())({data:d});g.html(h).show(),e.addClass("hide"),f.removeClass("hide")}else alert(123)}}),f.on("click",function(){c.css({background:""}),g.hide(),e.addClass("hide"),f.addClass("hide"),d.val("")})}),a(".icon-cart").on("click",function(){a.ajax("/takeaway/public/index.php/userBarCart",{beforeSend:function(){a(".tb-cart-dropdown-wrapper").show()},success:function(c){if(console.log(c),"true"==c.success){var d=c.data;if(!d.goods||!d.goods.length){var e=b.template(a("#tpl-tb-loading").html())();return void a(".tb-cart-dropdown").html(e)}var f=b.template(a("#tpl-tb-loading").html())();a(".tb-cart-dropdown").html(f)}}}),a("#tpl-tb-loading").show()}),{}});